# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Базовый код
1. Класс Component<T>
Находится в основе большинства компонент проекта, реализует работу с DOM-элементами (переключает класс, устанавливает текстовое содержимое, сменяет статус блокировки, скрывает/показывает элемент, устанавливает изображение).
Является дженериком, в конструкторе принимает DOM-элемент.
2. Класс EventEmmiter
Реализует паттерн «наблюдатель» и позволяет подписываться на события и уведомлять подписчиков о наступлении события.
Его свойство- объект с названием события и колбэк-функцией.
Класс имеет методы on, off, emit для подписки на событие, отписки и уведомления подписчиков о наступлении события соответственно.
Также реализованы методы onAll и offAll для подписки на все события и сброса всех подписчиков.
Метод trigger генерирует событие с заданными аргументами, чтобы передавать его как обработчик события в другие классы.
3. Класс API
Принимает в конструкторе baseURL(основной корневой адрес) и options (опции запроса).
Реализует асинхронные методы get (получить данные с сервера) и post (отправить данные на сервер).

## Компоненты модели данных
  Класс AppState
Управляет содержимым всего приложения.
Реализует следующие методы:
addItemToBasket- добавляет товар в корзину, принимает элемент товара
removeItemFromBasket- удаляет товар из корзины, принимает элемент товара
clearBasket- очищает корзину
getBasket- возвращает товары, которые находятся в корзине
getTotal- получает итоговую сумму заказа
setCatalog- устанавливает каталог товаров, принимает массив товаров
setPreview- устанавливает превью товара, принимает элемент товара
setOrderField- если в заказе верно указаны все данные, устанавливает окно с оформленным заказом
validateOrder- валидирует заказ, проверяет наличие данных покупателя

## Компоненты представления
1. Класс ItemCard
Наследуется от класса Component, отображает элемент товара.
Сеттерами устанавливает его id, название, описание, картинку, категорию и цену.
2. Класс Form
Наследуется от класса Component, реализует форму оплаты. Конструктор принимает контейнер (HTML элемент) и события для взаимодействия с пользователем.
Метод:
onInputChange- реагирует на изменения в поле ввода
3. Класс Order
Наследуется от класса Form, устанавливает данные пользоателя (номер, почту, адрес, способ оплаты) в форму оплаты.
Конструктор принимает контейнер с формой и события.
4. Класс Basket
Наследуется от класса Component, реализует корзину.
Устанавливает товары, находящиеся в корзине и итоговую стоимость.
Конструктор принимает контейнер-корзину и события.
5. Класс Modal
Наследуется от класса Component, реализует модальное окно приложения.
Конструктор принимает контейнер-модальное окно и события.
Устанавливается содержимое модалки.
Методы open и close - открытие и закрытие модалки.
Метод render собирает модальное окно.
6. Класс Success
Наследуется от класса Component, при удачной оплате товара, отображает окно успешной оплаты.
Конструктор принимает контейнер-модальное окно и действия для закрытия окна.
Также устанавливает окну название и выводит оплаченную сумму.
7. Класс Page
Наследуется от класса Component, собирает страницу воедино. Устанавливает счетчик товаров в корзине, каталог товаров.
Также устанавливает заблокированное состояние экрана при открытом модальном окне.
Конструктор принимает контейнер-страницу(page) и события.

## Типы данных и события
export type FormErrors = Partial<Record<keyof IOrder, string>>; - тип для ошибок формы
export type IBasketItem = Pick<IItemCard, 'id' | 'title' | 'price'>; - тип товара, находящегося в корзине

export interface IItemCard { - описывает типы карточки товара
    id: string;
    title: string;
    description: string;
    image: string;
    category: ItemCategory;
    price: number;
}

enum Events {
CHANGE_ITEMS = 'items:changed',
ORDER_READY = 'order:ready',
OPEN_ORDER = 'order:open',
CHANGE_PREVIEW = 'preview:changed',
CHANGE_ERRORS = 'formErrors:change',
OPEN_MODAL = 'modal:open',
CLOSE_ MODAL = 'modal:close'
OPEN_BASKET  = 'basket:open',
SET_PAYMENT = 'payment:set'
};
